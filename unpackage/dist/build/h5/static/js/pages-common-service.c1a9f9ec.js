(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-service"],{"0fb4":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */',""]),t.exports=e},1367:function(t,e,n){"use strict";var i=n("fdf0"),a=n.n(i);a.a},"1de5":function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"5ab6":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var i={name:"u-gap",props:{bgColor:{type:String,default:"transparent "},height:{type:[String,Number],default:30},marginTop:{type:[String,Number],default:0},marginBottom:{type:[String,Number],default:0}},computed:{gapStyle:function(){return{backgroundColor:this.bgColor,height:this.height+"rpx",marginTop:this.marginTop+"rpx",marginBottom:this.marginBottom+"rpx"}}}};e.default=i},"5e5f":function(t,e,n){var i=n("d0e8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("6c946de7",i,!0,{sourceMap:!1,shadowMode:!1})},6049:function(t,e,n){"use strict";n.r(e);var i=n("7daf"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"74c0":function(t,e,n){"use strict";var i=n("5e5f"),a=n.n(i);a.a},"74d1":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.examine=function(t){return(0,a.default)({url:"/common/examine",method:"POST",data:t})};var a=i(n("d42c"))},"7b83":function(t,e,n){"use strict";n.r(e);var i=n("5ab6"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"7daf":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac1f"),n("5319"),n("14d9");var a=i(n("5530")),o=n("26cb"),s=i(n("bff1")),r=n("edd7"),c=n("9034"),u=n("74d1"),l={computed:(0,a.default)({},(0,o.mapState)(["user"])),data:function(){return{list:[],value:"",scrollToViewID:"",scrollTop:0,accountId:null,account:{}}},onLoad:function(t){t.accountId&&(this.accountId=t.accountId),this.init()},mounted:function(){this.safariHacks()},methods:{init:function(){var t=this;(0,r.getMessage)().then((function(e){t.list=e.data,t.scrollToView()})),(0,c.detail)(this.accountId).then((function(e){var n=e.data;t.account=n}))},send:function(){var t=this.value;if(""!=t&&null!=t&&void 0!=t){t=t.replace(/\+/g,"{[$add$]}");var e={user_id:this.user.info.id,content:t,type:1};this.sendPush(e),this.value=""}},sendPush:function(t){var e=this;t.createtime_text=this.$utils.formatTime(),(0,u.examine)({content:t.content,content_type:t.type}).then((function(n){1==n.code?(e.list.push(t),e.scrollToView(),t.accountId=e.accountId,(0,r.send)(t)):uni.showModal({title:"提示",content:n.msg,showCancel:!1})}))},scrollToView:function(){var t=this;setTimeout((function(){uni.createSelectorQuery().select("#chat-box").boundingClientRect((function(e){console.log(e.height),t.scrollTop=e.height})).exec()}),100)},safariHacks:function(){var t=function(){setTimeout((function(){var t=document.querySelector(".bottom-block").offsetHeight+"px",e=window.innerHeight+"px";document.querySelector(".container-list").style.setProperty("height","calc("+e+" - "+t+")","important")}),1e3)};window.addEventListener("resize",(function(){t()})),t()},chooseImage:function(){var t=this;uni.chooseImage({count:1,sourceType:["album"],sizeType:["original"],success:function(e){var n=e.tempFilePaths[0];uni.uploadFile({url:s.default.uploadUrl,filePath:n,name:"file",fileType:"image",success:function(e){var n=JSON.parse(e.data);t.sendPush({user_id:t.user.info.id,content:n.data.fullurl,type:2})},fail:function(t){var e=JSON.parse(t);console.log(e)}})},fail:function(){console.log("失败",err)},complete:function(){console.log("结束")}})}}};e.default=l},b3fb:function(t,e,n){"use strict";n.r(e);var i=n("f390"),a=n("7b83");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("1367");var s=n("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"3ee8fe8e",null,!1,i["a"],void 0);e["default"]=r.exports},b78c:function(t,e,n){t.exports=n.p+"static/img/system.27f1b177.png"},b7c6:function(t,e,n){"use strict";n.r(e);var i=n("f34d"),a=n("6049");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("74c0");var s=n("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"798e1fbb",null,!1,i["a"],void 0);e["default"]=r.exports},d0e8:function(t,e,n){var i=n("24fb"),a=n("1de5"),o=n("f8c3"),s=n("f8c7");e=i(!1);var r=a(o),c=a(s);e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.container[data-v-798e1fbb]{background:#fff}.container .hint[data-v-798e1fbb]{text-align:center;color:#999}.container .list .msg[data-v-798e1fbb]{padding:%?20?%}.container .list .msg .avatar[data-v-798e1fbb]{width:13%;border-radius:%?10?%;display:flex;align-items:center}.container .list .msg .avatar uni-image[data-v-798e1fbb]{border-radius:50%;width:%?80?%;height:%?80?%}.container .list .msg .time[data-v-798e1fbb]{color:#999;font-size:14px}.container .list .msg .text[data-v-798e1fbb]{width:87%;margin-left:13%;color:#3b414f;margin-top:-15px}.container .list .msg .text uni-image[data-v-798e1fbb]{max-width:100%}.container .list .system[data-v-798e1fbb]{background-color:#f7f7f8}.bottom-block[data-v-798e1fbb]{padding:%?20?% 0;position:fixed;bottom:0;left:0;background-color:#fff;width:100vw}.bottom-block .bottom-view[data-v-798e1fbb]{width:90%;margin:0 auto;display:flex}.bottom-block .bottom-view .input[data-v-798e1fbb]{width:100%;position:relative;background-color:#f4f4f4}.bottom-block .bottom-view .input uni-textarea[data-v-798e1fbb]{margin:%?20?%;border-radius:%?5?%;width:70%}.bottom-block .bottom-view .input .image[data-v-798e1fbb]{position:absolute;top:0;right:%?100?%;display:flex;align-items:end;height:100%}.bottom-block .bottom-view .input .image uni-view[data-v-798e1fbb]{width:%?70?%;height:%?70?%;background:url('+r+") no-repeat;background-size:100% 100%;border-radius:%?5?%}.bottom-block .bottom-view .input .send[data-v-798e1fbb]{right:%?10?%}.bottom-block .bottom-view .input .send uni-view[data-v-798e1fbb]{background:url("+c+") no-repeat;background-size:100% 100%}.goods-info[data-v-798e1fbb]{display:flex;padding:20px 20px 12px;background-color:#fff}.goods-info .left[data-v-798e1fbb]{width:90px;height:90px;overflow:hidden;border-radius:10px}.goods-info .right[data-v-798e1fbb]{flex:1;padding-left:10px}.goods-info .right .title[data-v-798e1fbb]{overflow:hidden;font-size:14px;line-height:20px;min-height:40px;color:#333;font-weight:700;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.goods-info .right .area[data-v-798e1fbb]{padding-top:4px;color:#58bda2;display:flex;font-size:11px;line-height:15px}.goods-info .right .area uni-text[data-v-798e1fbb]{background-color:#eef8f5;padding:0 4px;border-radius:8px}.goods-info .right .account[data-v-798e1fbb]{padding-top:10px;color:#999}",""]),t.exports=e},edd7:function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.getMessage=function(){return(0,a.default)({url:"/customer/getMessage",method:"GET"})},e.send=function(t){return(0,a.default)({url:"/customer/send",method:"POST",data:t})};var a=i(n("d42c"))},f34d:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uGap:n("b3fb").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"container"},[i("v-uni-scroll-view",{staticClass:"list container-list",attrs:{"scroll-y":!0,"scroll-with-animation":!0,"scroll-top":t.scrollTop,"scroll-into-view":t.scrollToViewID}},[i("v-uni-view",{attrs:{id:"chat-box"}},[t.account?[i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"left"},[i("img",{attrs:{src:t.account.cover_image,alt:"",width:"100%"}})]),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.account.name))]),i("v-uni-view",{staticClass:"area"},[i("v-uni-text",[t._v(t._s(t.account.zoneName)+t._s(t.account.serverName))])],1),i("v-uni-view",{staticClass:"account"},[t._v("账号ID："+t._s(t.account.id))])],1)],1),i("u-gap",{attrs:{height:"20","bg-color":"#f7f7f7"}})]:t._e(),i("v-uni-view",{staticClass:"hint"},[t._v("页面非自动刷新，需手动刷新/退出重进查看新回复")]),t._l(t.list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"msg",attrs:{id:"msg"+a}},[i("v-uni-view",[i("v-uni-view",{staticClass:"viewFlex"},[i("v-uni-view",{staticClass:"avatar"},[e.user_id?i("v-uni-image",{attrs:{src:t.user.info.avatar}}):i("v-uni-image",{attrs:{src:n("b78c")}})],1),i("v-uni-view",{staticClass:"time"},[t._v(t._s(e.createtime_text))])],1),i("v-uni-view",{staticClass:"text"},[1==e.type?i("v-uni-rich-text",{attrs:{nodes:e.content}}):t._e(),2==e.type?i("v-uni-image",{attrs:{src:e.content,mode:"widthFix"}}):t._e()],1)],1)],1)}))],2)],1),i("v-uni-view",{staticClass:"bottom-block"},[i("v-uni-view",{staticClass:"bottom-view"},[i("v-uni-view",{staticClass:"input"},[i("v-uni-view",{},[i("v-uni-textarea",{attrs:{"auto-height":!0,placeholder:"请输入文本",bindinput:"getInput",maxlength:"1000"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),i("v-uni-view",{staticClass:"image",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[i("v-uni-view")],1),i("v-uni-view",{staticClass:"image send",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.send.apply(void 0,arguments)}}},[i("v-uni-view")],1)],1)],1)],1)],1)],1)},o=[]},f390:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"u-gap",style:[this.gapStyle]})},a=[]},f8c3:function(t,e){t.exports="data:image/png;base64,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"},f8c7:function(t,e,n){t.exports=n.p+"static/img/send.1d99dd04.png"},fdf0:function(t,e,n){var i=n("0fb4");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("e231e274",i,!0,{sourceMap:!1,shadowMode:!1})}}]);